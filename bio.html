<!DOCTYPE html>
<html>
<head>
  <title>WebAuthn Test</title>
</head>
<body>
  <button id="authenticate">Authenticate</button>
  <div id="error-message"></div>
  <script>
    const authenticateButton = document.getElementById('authenticate');
    const errorMessageDiv = document.getElementById('error-message');

    authenticateButton.addEventListener('click', async () => {
      try {
        const credentialOptions = {
          rp: {
            name: 'Your Website Name',
            id: window.location.origin // e.g. https://hpass.app
          },
          pubKeyCredParams: [
            {alg: -7} //, type: 'public-key-credential'}
          ],
          timeout: 60000,
          attestation: 'direct'
        };

        const credential = await navigator.credentials.create(credentialOptions);
        console.log('Credential created:', credential);
      } catch (error) {
        console.error('Error:', error);
        errorMessageDiv.innerText = `An error occurred: ${error.message}`;
      }
    });
  </script>
</body>
</html>